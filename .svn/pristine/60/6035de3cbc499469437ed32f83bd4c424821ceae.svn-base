<!-- Project list -->
<div class="panel panel-flat">
    <div class = "row m-10">
        <a href="#">
            <button class = "btn bg-success btn-labeled" id = "add_user"><b><i class="icon-plus2"></i></b>Add User</button>
        </a>
    </div>

    <div class="table-responsive">
        <table class="table text-nowrap datatable-user-list">
            <thead>
            <tr>
                <!-- <th style="width: 5px"></th> -->
                <th style="width: 500px">Email</th>
                <th style="width: 250px">Name</th>
                <th style="width: 50px">Role</th>
<!--                <th>Team</th>-->
<!--                <th>Start date</th>-->
<!--                <th>End date</th>-->
<!--                <th>Category</th>-->
                <th style="width: 20px;"><i class="icon-arrow-down12"></i></th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

    </div>
</div>

<style>
    .dataTable{
        border-collapse: collapse;
    }
    .dataTable tbody > tr:first-child > td {
        border-top: none;
        border-top: 1px solid #ddd;
        border-collapse: collapse;
    }
    .table > tbody > tr.border-double > td {
        border-top-width: 3px;
        border-top-style: double;
    }
</style>

<script type="text/javascript">
    $(function () {
        var option = "";
        <?php foreach ($role as $key => $value) { ?>
        option += '<option value="<?php echo $value->id ?>"><?php echo $value->role_name ?></option>';
        <?php }?>
        var option2 = "";
        <?php foreach ($user as $k => $v) { ?>
//        console.log(<?php //echo $value?>//);
        option2 += '<option value="<?php echo $v->employee_id ."-".$v->email ?>"><?php echo $v->email ?></option>';
        <?php }?>
        $('#add_user').on('click', function() {
            bootbox.dialog({
                    title: "Add User",
                    message: '<div class="row"> ' +
                    '<div class="col-md-12">' +
                    '<form action="#" id = "add_user_form">' +
                    '<div class="form-group">' +
                    '<div class="row">'+
                    '<div class="col-sm-6">'+
                    '<label>Email</label> '+
                    '<select id="country" name="email" data-placeholder="Test" class="select">'+
                    option2 +
                    '</select>' +
                    '</div> '+
                    '<div class="col-sm-6">'+
                    '<label>Name</label> '+
                    '<input type="text" name = "fullname" class="form-control"> '+
                    '</div> '+
                    '</div>'+
                    '</div>'+
                    '<div class="row">'+
                    '<div class="col-sm-12">'+
                    '<div class="form-group"> '+
                    '<label>Role</label> '+
                    '<select id="country" name="role" data-placeholder="Test" class="select">'+
                    option +
                    '</select>' +
                    '</div> ' +
                    '</div>' +
                    '</div>' +
                    '</div>'+
                    '</div>'+
                    '</div>'+
                    '</form>' +
                    '</div>' +
                    '</div>',
                    buttons: {
                        success: {
                            label: "Add User",
                            className: "btn-success",
                            callback: function () {
                                var form = $('#add_user_form');
                                $.ajax({
                                    url:  JS_BASE_URL +'/administration/addUser',
                                    type : 'POST',
                                    dataType: 'json',
                                    data: form.serialize(),
                                    success: function(res) {
                                        var dbmil = $('.datatable-user-list').dataTable();
                                        if(res.status == 'Success'){
                                            dbmil.api().ajax.reload();
                                        }
                                    }
                                });

                            }
                        }
                    }
                }
            );

            $('.select').parents('.bootbox').removeAttr('tabindex');
            $('.select').select2();
            // Single picker
            $('.daterange-single').daterangepicker({
                singleDatePicker: true,
            });
        });


    });
</script>

